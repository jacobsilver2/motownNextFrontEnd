{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  query ALL_ARTISTS_BEGINNING_WITH_QUERY($skip: Int = 0, $first: Int = \", \", $letter: String, $sortBy: ArtistOrderByInput!) {\\n    artists(where: {name_starts_with: $letter}, first: $first, skip: $skip, orderBy: $sortBy) {\\n      id\\n      name\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query ALL_ARTISTS_QUERY($skip: Int = 0, $first: Int = \", \", $sortBy: ArtistOrderByInput!) {\\n    artists(first: $first, skip: $skip, orderBy: $sortBy ) {\\n      id\\n      name\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { gql } from \"apollo-boost\";\nimport Router from \"next/router\";\nimport Select from \"react-select\";\nimport Artist from \"./Artist\";\nimport Pagination from \"../components/Pagination\";\nimport { perPage } from \"../config\";\nimport { SelectButton } from \"primereact/selectbutton\";\nimport { selectButtonsAthruZ } from \"../lib/selectButtons\";\nimport Center from \"./styles/Center\";\nimport MultiList from \"./styles/Multilist\";\nimport sortBySelectItems from \"../lib/sortByOptions/artistsSortBySelectOptions\";\nimport customTheme from \"./styles/reactSelectTheme\";\nimport getSelectLabel from \"../lib/sortByOptions/sortBySelectReturnLabel\";\nvar ALL_ARTISTS_QUERY = gql(_templateObject(), perPage);\nexport var ALL_ARTISTS_BEGINNING_WITH_QUERY = gql(_templateObject2(), perPage);\n\nvar Artists = function Artists(_ref) {\n  var page = _ref.page;\n\n  var _useState = useState(\"\"),\n      letter = _useState[0],\n      setLetter = _useState[1];\n\n  var _useState2 = useState(\"name_ASC\"),\n      sortBy = _useState2[0],\n      setSortBy = _useState2[1];\n\n  var _useQuery = useQuery(ALL_ARTISTS_QUERY, {\n    variables: {\n      skip: page * perPage - perPage,\n      first: perPage,\n      sortBy: sortBy\n    }\n  }),\n      allArtistsLoading = _useQuery.loading,\n      allArtistsError = _useQuery.error,\n      allArtistsData = _useQuery.data;\n\n  var _useQuery2 = useQuery(ALL_ARTISTS_BEGINNING_WITH_QUERY, {\n    variables: {\n      skip: page * perPage - perPage,\n      first: perPage,\n      letter: letter,\n      sortBy: sortBy\n    }\n  }),\n      artistsBeginningWithLoading = _useQuery2.loading,\n      artistsBeginningWithError = _useQuery2.error,\n      artistsBeginningWithData = _useQuery2.data;\n\n  if (allArtistsLoading || artistsBeginningWithLoading) return __jsx(\"p\", null, \"Loading...\");\n  if (allArtistsError || artistsBeginningWithError) return __jsx(\"p\", null, \"Error :(\");\n  var artists = !letter ? allArtistsData.artists.map(function (artist) {\n    return __jsx(Artist, {\n      key: artist.id,\n      artist: artist\n    });\n  }) : artistsBeginningWithData.artists.map(function (artist) {\n    return __jsx(Artist, {\n      key: artist.id,\n      artist: artist\n    });\n  });\n  return __jsx(Center, null, __jsx(SelectButton, {\n    value: letter,\n    options: selectButtonsAthruZ,\n    onChange: function onChange(e) {\n      setLetter(e.value);\n      Router.push({\n        pathname: \"/artists\",\n        query: {\n          page: 1\n        }\n      });\n    }\n  }), __jsx(\"br\", null), __jsx(Select, {\n    options: sortBySelectItems,\n    theme: customTheme,\n    placeholder: \"Sort by \".concat(getSelectLabel(sortBySelectItems, sortBy)),\n    onChange: function onChange(e) {\n      return setSortBy(e.value);\n    },\n    isSearchable: true\n  }), __jsx(\"br\", null), __jsx(Pagination, {\n    page: page,\n    model: \"artists\",\n    letter: letter\n  }), __jsx(MultiList, null, artists), __jsx(Pagination, {\n    page: page,\n    model: \"artists\",\n    letter: letter\n  }));\n};\n\nexport default Artists;","map":null,"metadata":{},"sourceType":"module"}